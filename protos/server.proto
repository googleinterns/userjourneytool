syntax = "proto2";
import "graph_structures.proto";
package ujt_protos;

service ReportingService {
    // for generating graph
    rpc GetNodes(GetNodesRequest) returns (GetNodesResponse) {}
    // for updating statuses
    rpc GetSLIs(GetSLIsRequest) returns (GetSLIsResponse) {}
    // for user journeys
    rpc GetClients(GetClientsRequest) returns (GetClientsResponse) {}

    rpc SetComment(SetCommentRequest) returns (SetCommentResponse) {}

    rpc SetOverrideStatus(SetOverrideStatusRequest) returns (SetOverrideStatusResponse) {}
}

message GetNodesRequest {
    // We can add filtering fields later.
    // Not sure if it's necessary/useful to request a subset of nodes.
    // I imagine nodes should be requested once at startup (and perhaps force-refreshed), 
    // which should both request all nodes.
}

message GetNodesResponse {
    repeated Node nodes = 1;
}

message GetSLIsRequest {
    // ...
}

message GetSLIsResponse {
    repeated SLI slis = 1;
}

message GetClientsRequest {
    // ...
}

message GetClientsResponse {
    repeated Client clients = 1;
}

message SetCommentRequest {
    optional string node_name = 1;
    optional string comment = 2;
}

message SetCommentResponse {
    // ...
}

message SetOverrideStatusRequest {
    optional string node_name = 1;
    optional Status override_status = 2;
}

message SetOverrideStatusResponse {
    // ...
}